---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.20.0
  name: agentcatalogs.agentregistry.dev
spec:
  group: agentregistry.dev
  names:
    kind: AgentCatalog
    listKind: AgentCatalogList
    plural: agentcatalogs
    shortNames:
    - agcat
    - agentcat
    singular: agentcatalog
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - jsonPath: .spec.name
      name: Name
      type: string
    - jsonPath: .spec.version
      name: Version
      type: string
    - jsonPath: .spec.image
      name: Image
      type: string
    - jsonPath: .status.published
      name: Published
      type: boolean
    - jsonPath: .status.isLatest
      name: Latest
      type: boolean
    - jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    name: v1alpha1
    schema:
      openAPIV3Schema:
        description: AgentCatalog is the Schema for the agentcatalogs API
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: AgentCatalogSpec defines the desired state of AgentCatalog
            properties:
              description:
                description: Description is a human-readable description of the agent
                type: string
              framework:
                description: Framework is the agent framework used (e.g., "langgraph",
                  "autogen")
                type: string
              image:
                description: Image is the container image for the agent
                type: string
              language:
                description: Language is the programming language of the agent
                type: string
              mcpServers:
                description: McpServers are the MCP server configurations for the
                  agent
                items:
                  description: McpServerConfig represents an MCP server configuration
                    for an agent
                  properties:
                    args:
                      description: Args are the command arguments
                      items:
                        type: string
                      type: array
                    build:
                      description: Build is the build path for local MCP servers
                      type: string
                    command:
                      description: Command is the command to run for command-type
                        MCP servers
                      type: string
                    env:
                      description: Env are the environment variables
                      items:
                        type: string
                      type: array
                    headers:
                      additionalProperties:
                        type: string
                      description: Headers are the HTTP headers for remote MCP servers
                      type: object
                    image:
                      description: Image is the container image for local MCP servers
                      type: string
                    name:
                      description: Name is the MCP server name
                      type: string
                    registryServerName:
                      description: RegistryServerName is the server name in the registry
                      type: string
                    registryServerPreferRemote:
                      description: RegistryServerPreferRemote indicates whether to
                        prefer remote transport
                      type: boolean
                    registryServerVersion:
                      description: RegistryServerVersion is the server version in
                        the registry
                      type: string
                    registryURL:
                      description: RegistryURL is the registry URL for registry-type
                        MCP servers
                      type: string
                    type:
                      description: Type is the MCP server type (remote, command, registry)
                      type: string
                    url:
                      description: URL is the URL for remote MCP servers
                      type: string
                  required:
                  - name
                  - type
                  type: object
                type: array
              modelName:
                description: ModelName is the specific model name
                type: string
              modelProvider:
                description: ModelProvider is the LLM provider (e.g., "anthropic",
                  "openai")
                type: string
              name:
                description: Name is the canonical name of the agent
                type: string
              packages:
                description: Packages are the available package configurations
                items:
                  description: AgentPackage represents a package configuration for
                    agents
                  properties:
                    identifier:
                      description: Identifier is the package identifier (e.g., OCI
                        image reference)
                      type: string
                    registryType:
                      description: RegistryType indicates how to download packages
                        (e.g., "oci")
                      type: string
                    transport:
                      description: Transport is the transport type configuration
                      properties:
                        type:
                          description: Type is the transport type
                          type: string
                      required:
                      - type
                      type: object
                    version:
                      description: Version is the package version
                      type: string
                  required:
                  - identifier
                  - registryType
                  type: object
                type: array
              remotes:
                description: Remotes are the remote transport configurations
                items:
                  description: Transport represents the transport protocol configuration
                  properties:
                    headers:
                      description: Headers are HTTP headers for streamable-http transport
                      items:
                        description: KeyValueInput represents a key-value pair with
                          optional description
                        properties:
                          description:
                            description: Description is an optional description of
                              the input
                            type: string
                          name:
                            description: Name is the key name
                            type: string
                          required:
                            description: Required indicates if this input is required
                            type: boolean
                          value:
                            description: Value is the value (can use environment variable
                              substitution)
                            type: string
                        required:
                        - name
                        type: object
                      type: array
                    type:
                      description: Type is the transport type (stdio or streamable-http)
                      type: string
                    url:
                      description: URL is the URL for streamable-http transport
                      type: string
                  required:
                  - type
                  type: object
                type: array
              repository:
                description: Repository is the source code repository information
                properties:
                  id:
                    description: ID is the repository identifier from the hosting
                      service
                    type: string
                  source:
                    description: Source is the repository hosting service identifier
                      (e.g., "github")
                    type: string
                  subfolder:
                    description: Subfolder is an optional relative path to the server
                      location within a monorepo
                    type: string
                  url:
                    description: URL is the repository URL for browsing source code
                    type: string
                type: object
              telemetryEndpoint:
                description: TelemetryEndpoint is the endpoint for telemetry data
                type: string
              title:
                description: Title is a human-readable title for the agent
                type: string
              version:
                description: Version is the semantic version of the agent
                type: string
              websiteUrl:
                description: WebsiteURL is the URL to the agent's website or documentation
                type: string
            required:
            - image
            - name
            - version
            type: object
          status:
            description: AgentCatalogStatus defines the observed state of AgentCatalog
            properties:
              conditions:
                description: Conditions represent the latest available observations
                  of the agent's state
                items:
                  description: CatalogCondition contains details for the current condition
                    of this resource
                  properties:
                    lastTransitionTime:
                      description: LastTransitionTime is the last time the condition
                        transitioned
                      format: date-time
                      type: string
                    message:
                      description: Message is a human-readable message indicating
                        details about the transition
                      type: string
                    reason:
                      description: Reason is a brief reason for the condition's last
                        transition
                      type: string
                    status:
                      description: Status is the status of the condition (True, False,
                        Unknown)
                      type: string
                    type:
                      description: Type is the type of condition
                      type: string
                  required:
                  - status
                  - type
                  type: object
                type: array
              deployment:
                description: Deployment tracks the runtime deployment info (optional,
                  set by user or discovered)
                properties:
                  lastChecked:
                    description: LastChecked is when health was last verified
                    format: date-time
                    type: string
                  message:
                    description: Message provides additional deployment status info
                    type: string
                  namespace:
                    description: Namespace where the server is deployed
                    type: string
                  ready:
                    description: Ready indicates if the deployment is healthy
                    type: boolean
                  serviceName:
                    description: ServiceName is the Kubernetes Service name (if applicable)
                    type: string
                  url:
                    description: URL is the endpoint URL for health checks
                    type: string
                type: object
              isLatest:
                description: IsLatest indicates whether this is the latest version
                  of the agent
                type: boolean
              observedGeneration:
                description: ObservedGeneration is the generation last observed by
                  the controller
                format: int64
                type: integer
              published:
                description: Published indicates whether this agent version is published
                  and visible
                type: boolean
              publishedAt:
                description: PublishedAt is the timestamp when this version was published
                format: date-time
                type: string
              status:
                description: Status is the lifecycle status (active, deprecated, deleted)
                type: string
            required:
            - isLatest
            - published
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
