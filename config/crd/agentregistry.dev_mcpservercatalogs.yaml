---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.20.0
  name: mcpservercatalogs.agentregistry.dev
spec:
  group: agentregistry.dev
  names:
    kind: MCPServerCatalog
    listKind: MCPServerCatalogList
    plural: mcpservercatalogs
    shortNames:
    - mcscat
    - mcservercat
    singular: mcpservercatalog
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - jsonPath: .spec.name
      name: Name
      type: string
    - jsonPath: .spec.version
      name: Version
      type: string
    - jsonPath: .status.published
      name: Published
      type: boolean
    - jsonPath: .status.isLatest
      name: Latest
      type: boolean
    - jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    name: v1alpha1
    schema:
      openAPIV3Schema:
        description: MCPServerCatalog is the Schema for the mcpservercatalogs API
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: MCPServerCatalogSpec defines the desired state of MCPServerCatalog
            properties:
              description:
                description: Description is a human-readable description of the server
                type: string
              name:
                description: Name is the canonical name of the MCP server (e.g., "github/modelcontextprotocol/filesystem")
                type: string
              packages:
                description: Packages are the available package configurations
                items:
                  description: Package represents a package configuration for MCP
                    servers
                  properties:
                    environmentVariables:
                      description: EnvironmentVariables are set when running the package
                      items:
                        description: KeyValueInput represents a key-value pair with
                          optional description
                        properties:
                          description:
                            description: Description is an optional description of
                              the input
                            type: string
                          name:
                            description: Name is the key name
                            type: string
                          required:
                            description: Required indicates if this input is required
                            type: boolean
                          value:
                            description: Value is the value (can use environment variable
                              substitution)
                            type: string
                        required:
                        - name
                        type: object
                      type: array
                    fileSha256:
                      description: FileSHA256 is the SHA-256 hash for integrity verification
                      type: string
                    identifier:
                      description: Identifier is the package identifier
                      type: string
                    packageArguments:
                      description: PackageArguments are passed to the package's binary
                      items:
                        description: Argument represents a command-line argument
                        properties:
                          description:
                            description: Description is an optional description
                            type: string
                          multiple:
                            description: Multiple indicates if the argument can be
                              specified multiple times
                            type: boolean
                          name:
                            description: Name is the argument name
                            type: string
                          required:
                            description: Required indicates if this argument is required
                            type: boolean
                          type:
                            description: Type is the argument type (positional, flag)
                            type: string
                          value:
                            description: Value is the default value
                            type: string
                        required:
                        - name
                        type: object
                      type: array
                    registryBaseUrl:
                      description: RegistryBaseURL is the base URL of the package
                        registry
                      type: string
                    registryType:
                      description: RegistryType indicates how to download packages
                        (e.g., "npm", "pypi", "oci", "nuget", "mcpb")
                      type: string
                    runtimeArguments:
                      description: RuntimeArguments are passed to the package's runtime
                        command
                      items:
                        description: Argument represents a command-line argument
                        properties:
                          description:
                            description: Description is an optional description
                            type: string
                          multiple:
                            description: Multiple indicates if the argument can be
                              specified multiple times
                            type: boolean
                          name:
                            description: Name is the argument name
                            type: string
                          required:
                            description: Required indicates if this argument is required
                            type: boolean
                          type:
                            description: Type is the argument type (positional, flag)
                            type: string
                          value:
                            description: Value is the default value
                            type: string
                        required:
                        - name
                        type: object
                      type: array
                    runtimeHint:
                      description: RuntimeHint suggests the appropriate runtime for
                        the package
                      type: string
                    transport:
                      description: Transport is the transport protocol configuration
                      properties:
                        headers:
                          description: Headers are HTTP headers for streamable-http
                            transport
                          items:
                            description: KeyValueInput represents a key-value pair
                              with optional description
                            properties:
                              description:
                                description: Description is an optional description
                                  of the input
                                type: string
                              name:
                                description: Name is the key name
                                type: string
                              required:
                                description: Required indicates if this input is required
                                type: boolean
                              value:
                                description: Value is the value (can use environment
                                  variable substitution)
                                type: string
                            required:
                            - name
                            type: object
                          type: array
                        type:
                          description: Type is the transport type (stdio or streamable-http)
                          type: string
                        url:
                          description: URL is the URL for streamable-http transport
                          type: string
                      required:
                      - type
                      type: object
                    version:
                      description: Version is the package version
                      type: string
                  required:
                  - identifier
                  - registryType
                  - transport
                  type: object
                type: array
              remotes:
                description: Remotes are the remote transport configurations (streamable-http
                  endpoints)
                items:
                  description: Transport represents the transport protocol configuration
                  properties:
                    headers:
                      description: Headers are HTTP headers for streamable-http transport
                      items:
                        description: KeyValueInput represents a key-value pair with
                          optional description
                        properties:
                          description:
                            description: Description is an optional description of
                              the input
                            type: string
                          name:
                            description: Name is the key name
                            type: string
                          required:
                            description: Required indicates if this input is required
                            type: boolean
                          value:
                            description: Value is the value (can use environment variable
                              substitution)
                            type: string
                        required:
                        - name
                        type: object
                      type: array
                    type:
                      description: Type is the transport type (stdio or streamable-http)
                      type: string
                    url:
                      description: URL is the URL for streamable-http transport
                      type: string
                  required:
                  - type
                  type: object
                type: array
              repository:
                description: Repository is the source code repository information
                properties:
                  id:
                    description: ID is the repository identifier from the hosting
                      service
                    type: string
                  source:
                    description: Source is the repository hosting service identifier
                      (e.g., "github")
                    type: string
                  subfolder:
                    description: Subfolder is an optional relative path to the server
                      location within a monorepo
                    type: string
                  url:
                    description: URL is the repository URL for browsing source code
                    type: string
                type: object
              sourceRef:
                description: SourceRef references a deployed MCPServer resource to
                  sync status from
                properties:
                  kind:
                    description: Kind is the resource kind (e.g., MCPServer)
                    type: string
                  name:
                    description: Name is the resource name
                    type: string
                  namespace:
                    description: Namespace is the resource namespace
                    type: string
                required:
                - kind
                - name
                - namespace
                type: object
              title:
                description: Title is a human-readable title for the server
                type: string
              version:
                description: Version is the semantic version of the server
                type: string
              websiteUrl:
                description: WebsiteURL is the URL to the server's website or documentation
                type: string
            required:
            - name
            - version
            type: object
          status:
            description: MCPServerCatalogStatus defines the observed state of MCPServerCatalog
            properties:
              conditions:
                description: Conditions represent the latest available observations
                  of the server's state
                items:
                  description: CatalogCondition contains details for the current condition
                    of this resource
                  properties:
                    lastTransitionTime:
                      description: LastTransitionTime is the last time the condition
                        transitioned
                      format: date-time
                      type: string
                    message:
                      description: Message is a human-readable message indicating
                        details about the transition
                      type: string
                    reason:
                      description: Reason is a brief reason for the condition's last
                        transition
                      type: string
                    status:
                      description: Status is the status of the condition (True, False,
                        Unknown)
                      type: string
                    type:
                      description: Type is the type of condition
                      type: string
                  required:
                  - status
                  - type
                  type: object
                type: array
              deployment:
                description: Deployment tracks the runtime deployment info (optional,
                  set by user or discovered)
                properties:
                  lastChecked:
                    description: LastChecked is when health was last verified
                    format: date-time
                    type: string
                  message:
                    description: Message provides additional deployment status info
                    type: string
                  namespace:
                    description: Namespace where the server is deployed
                    type: string
                  ready:
                    description: Ready indicates if the deployment is healthy
                    type: boolean
                  serviceName:
                    description: ServiceName is the Kubernetes Service name (if applicable)
                    type: string
                  url:
                    description: URL is the endpoint URL for health checks
                    type: string
                type: object
              isLatest:
                description: IsLatest indicates whether this is the latest version
                  of the server
                type: boolean
              observedGeneration:
                description: ObservedGeneration is the generation last observed by
                  the controller
                format: int64
                type: integer
              published:
                description: Published indicates whether this server version is published
                  and visible
                type: boolean
              publishedAt:
                description: PublishedAt is the timestamp when this version was published
                format: date-time
                type: string
              status:
                description: Status is the lifecycle status (active, deprecated, deleted)
                type: string
            required:
            - isLatest
            - published
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
